<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Histórico de Movimentações</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <h2>Histórico de Movimentações</h2>

    <!-- Toggle Switch -->
    <label class="switch">
        <input type="checkbox" id="themeToggle" onchange="toggleDarkMode()">
        <span class="slider"></span>
    </label>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome do Item</th>
                <th>Tipo</th>
                <th>Quantidade</th>
                <th>Usuário</th>
                <th>Data</th>
            </tr>
        </thead>
        <tbody>
            {% for mov in movimentacoes %}
            <tr>
                <td>{{ mov.id }}</td>
                <td>{{ mov.item.nome }}</td>
                <td class="{{ 'entrada' if mov.tipo == 'Entrada' else 'saida' }}">{{ mov.tipo }}</td>
                <td>{{ mov.quantidade }}</td>
                <td>{{ mov.usuario or '—' }}</td>
                <td>{{ mov.data.strftime('%d/%m/%Y %H:%M') }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <a href="/" class="btn btn-voltar">Voltar ao Estoque</a>

    <!-- Script do Dark Mode -->
    <script>
        function toggleDarkMode() {
            const isDark = document.body.classList.toggle('dark-theme');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            document.getElementById('themeToggle').checked = isDark;
        }

        window.onload = () => {
            const savedTheme = localStorage.getItem('theme');
            const isDark = savedTheme === 'dark';
            if (isDark) {
                document.body.classList.add('dark-theme');
            }
            document.getElementById('themeToggle').checked = isDark;
        };
    </script>
</body>

</html>